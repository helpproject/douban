jQuery.extend({createUploadIframe:function(d,b){var a="jUploadFrame"+d,c="";if(window.ActiveXObject){if(typeof b=="boolean"){c="javascript:false"}else{if(typeof b=="string"){c=b}}}return $('<iframe src="'+c+'" id="'+a+'" name="'+a+'" style="position:absolute;top:-1000em;left:-1000em;"></iframe>').appendTo("body")},createUploadForm:function(a,i,d){var g="jUploadForm"+a;var c="jUploadFile"+a;var b=$('<form  action="" method="POST" name="'+g+'" id="'+g+'" enctype="multipart/form-data"></form>');var e=$("#"+i);var f=$(e).clone(true);$(e).attr("id",c);$(e).before(f);$(e).appendTo(b);if(d!="undefined"){for(var h in d){if(d.hasOwnProperty(h)){$("<input />").attr({type:"hidden",name:h,value:d[h]}).appendTo(b)}}}$(b).css("position","absolute").css("top","-1200px").css("left","-1200px");$(b).appendTo("body");return b},ajaxFileUpload:function(m){m=jQuery.extend({},jQuery.ajaxSettings,m);var d=$("#"+m.fileElementId)[0].value.split(".");d=d[d.length-1].toLowerCase();if(!new RegExp(m.allowType).test(d)){if(m.begin){m.begin(12)}else{m.error(null,"error",12)}return false}var a=new Date().getTime();var b=jQuery.createUploadForm(a,m.fileElementId,m.extra);var j=jQuery.createUploadIframe(a,m.secureuri);var i="jUploadFrame"+a;var k="jUploadForm"+a;if(m.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}if(m.begin){m.begin("")}var c=false;var g={};if(m.global){jQuery.event.trigger("ajaxSend",[g,m])}var f=function(e){var p=document.getElementById(i);if(p.contentWindow){g.responseText=p.contentWindow.document.body?p.contentWindow.document.body.innerHTML:null;g.responseXML=p.contentWindow.document.XMLDocument?p.contentWindow.document.XMLDocument:p.contentWindow.document;g.responsePar=paras(p.contentWindow.location.href)}else{if(p.contentDocument){g.responseText=p.contentDocument.document.body?p.contentDocument.document.body.innerHTML:null;g.responseXML=p.contentDocument.document.XMLDocument?p.contentDocument.document.XMLDocument:p.contentDocument.document;g.responsePar=paras(p.contentDocument.location.href)}}if(g||e=="timeout"){c=true;var n;n=e!="timeout"?"success":"error";if(n!="error"){var o=jQuery.uploadHttpData(g,m.dataType);if(m.success){m.success(o,n)}if(m.global){jQuery.event.trigger("ajaxSuccess",[g,m])}}else{jQuery.handleError(m,g,n,"timeout");$(p).remove();$(b).remove()}if(m.global){jQuery.event.trigger("ajaxComplete",[g,m])}if(m.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(m.complete){m.complete(g,n)}jQuery(p).unbind();setTimeout(function(){if($(p)!=[]){$(p).remove()}if($(b)!=[]){$(b).remove()}},200);g=null}};if(m.timeout>0){var l=setTimeout(function(){if(!c){f("timeout")}},m.timeout)}try{var j=$("#"+i);var b=$("#"+k);$(b).attr("action",m.url);$(b).attr("method","POST");$(b).attr("target",i);if(b.encoding){b.encoding="multipart/form-data"}else{b.enctype="multipart/form-data"}$(b).submit()}catch(h){jQuery.handleError(m,g,null,h)}if(window.attachEvent){document.getElementById(i).attachEvent("onload",f)}else{document.getElementById(i).addEventListener("load",f,false)}return{abort:function(){try{$(j).remove();$(b).remove();clearTimeout(l)}catch(n){}}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){data=data.match(/\{.*\}/)[0];eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}if(type=="redir"){data=r.responsePar}return data}});